(function(t){function e(e){for(var c,o,i=e[0],u=e[1],s=e[2],d=0,b=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(c in u)Object.prototype.hasOwnProperty.call(u,c)&&(t[c]=u[c]);l&&l(e);while(b.length)b.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],c=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(c=!1)}c&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var c={},r={app:0},a=[];function o(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=c,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)o.d(n,c,function(e){return t[e]}.bind(null,c));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/market/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1a01":function(t){t.exports=JSON.parse('{"1":{"G":"Книги","B":{"1":{"N":"Алгоритмы. Построение и анализ. Т. Кормен, Ч. Лейзерсон, Р. Ривест, К. Штайн.","T":1},"2":{"N":"Совершенный код. Стив Макконнелл.","T":1},"3":{"N":"JavaScript. Подробное руководство. Дэвид Флэнаган.","T":1}}},"2":{"G":"Еда","C":2,"B":{"7":{"N":"Овсяные пирожные с шоколадной прослойкой","T":3},"8":{"N":"Суп с пекинской капустой","T":3},"85":{"N":"Вишня в коньяке","T":3},"86":{"N":"Постный фаршированный перец","T":3},"109":{"N":"Салат Подсолнух","T":""},"110":{"N":"Форель «Эрланген»","T":""},"111":{"N":"Салат с морепродуктами","T":3},"112":{"N":"Тёртый пирог","T":3},"115":{"N":"Свинина, маринованная в красном вине, с кориандром","T":""},"116":{"N":"Салат с черносливом и ветчиной","T":""},"125":{"N":"Болгарский перец и цуккини на гриле","T":3},"126":{"N":"Салат «Букет нарциссов»","T":3},"127":{"N":"Салат из морепродуктов, с огурцами, рукколой и оливками","T":3}}},"5":{"G":"Спорт","C":2,"B":{"184":{"N":"Беговая дорожка","T":1},"185":{"N":"Гантели съемные","T":1},"186":{"N":"Ружьё охотничье","T":1},"187":{"N":"Велотренажер","T":1}}},"8":{"G":"Сантехника","C":3,"B":{"4":{"N":"Акриловая ванна Alpen Mars ","T":1},"5":{"N":"Смеситель Sturm Classica","T":1},"6":{"N":"Тумба с раковиной Tiffany World ","T":1}}},"10":{"G":"Запчасти для машин","C":3,"B":{"191":{"N":"Амортизатор задний CX-5 ","T":3},"192":{"N":"Пружина амортизатора ","T":3},"193":{"N":"Корпус воздушного фильтра ","T":3},"194":{"N":"Ремень приводной","T":3},"195":{"N":"Диффузор радиатора","T":1},"196":{"N":"Фильтр АКПП","T":3}}},"15":{"G":"Сувениры","C":2,"B":{"11":{"N":"Набор для рисования Пастель","T":3},"12":{"N":"Брелок-рулетка","T":3},"63":{"N":"Брелок-открывалка","T":3},"64":{"N":"Ручка-стилус шариковая","T":3},"146":{"N":"Браслет","T":3},"147":{"N":"Чехол для очков","T":3},"148":{"N":"Сумка для выставок","T":3}}}}')},5669:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r=Object(c["p"])("data-v-14ff57c0");Object(c["i"])("data-v-14ff57c0");var a={class:"page"},o={class:"exchange"},i=Object(c["e"])("div",null,"Курс: min=20 р.",-1),u={class:"exchange-range"},s=Object(c["e"])("div",null,"max=80 р.",-1),l={class:"market"},d={class:"group__title"},b={class:"goods"},f={class:"goods__title"},p={class:"goods__price"},O={class:"cart"},j=Object(c["e"])("h2",null,"Корзина",-1),h={class:"cart__table"},g=Object(c["e"])("th",null,"Наименование",-1),m=Object(c["e"])("th",null,"Количество",-1),v=Object(c["e"])("th",null,"Цена",-1),T={class:"cart__qty"},N={key:0},y={class:"cart__amount"};Object(c["h"])();var C=r((function(t,e,n,r,C,x){return Object(c["g"])(),Object(c["c"])("div",a,[Object(c["e"])("div",o,[i,Object(c["e"])("div",u,[Object(c["e"])("span",{class:C.priceClass},Object(c["l"])(C.exchangeRate),3),Object(c["o"])(Object(c["e"])("input",{type:"range",min:"20",max:"80","onUpdate:modelValue":e[1]||(e[1]=function(t){return C.exchangeRate=t})},null,512),[[c["m"],C.exchangeRate]])]),s]),Object(c["e"])("div",l,[(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["k"])(x.goods,(function(t,e){return Object(c["g"])(),Object(c["c"])("div",{class:"group",key:e},[Object(c["e"])("h3",d,Object(c["l"])(t.title),1),Object(c["e"])("ul",b,[(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["k"])(t.goods,(function(t,e){return Object(c["g"])(),Object(c["c"])("li",{class:"goods__item",key:e},[Object(c["e"])("p",f,Object(c["l"])(t.title)+" ("+Object(c["l"])(t.balance)+")",1),Object(c["e"])("span",p,Object(c["l"])(x.getRublePrice(t.price)),1),Object(c["e"])("button",{class:"button",type:"button",onClick:function(e){return x.addToCart(t)}}," + ",8,["onClick"])])})),128))])])})),128))]),Object(c["e"])("div",O,[j,Object(c["e"])("table",h,[Object(c["e"])("tbody",null,[g,m,v,(Object(c["g"])(!0),Object(c["c"])(c["a"],null,Object(c["k"])(x.cartList,(function(t,e){return Object(c["g"])(),Object(c["c"])("tr",{key:e},[Object(c["e"])("td",null,Object(c["l"])(t.title),1),Object(c["e"])("td",T,[Object(c["e"])("input",{type:"number",min:"0",value:t.qty,onInput:function(e){return x.changeQty(t,e)}},null,40,["value","onInput"]),t.qty>t.balance?(Object(c["g"])(),Object(c["c"])("span",N,"Количество ограничено")):Object(c["d"])("",!0)]),Object(c["e"])("td",null,Object(c["l"])(x.getRublePrice(t.price))+" руб./шт",1),Object(c["e"])("td",null,[Object(c["e"])("button",{class:"button",onClick:function(e){return x.removeFromCart(t)}}," Удалить ",8,["onClick"])])])})),128))])]),Object(c["e"])("span",y,"Общая стоимость:"+Object(c["l"])(x.getRublePrice(x.cartAmount))+" руб.",1)])])})),x=n("5530"),_=(n("b680"),n("a9e3"),{name:"App",data:function(){return{groupedGoods:[],exchangeRate:50,priceClass:"exchange-price"}},methods:{getRublePrice:function(t){return(t*this.exchangeRate).toFixed(2)},addToCart:function(t){this.$store.dispatch("Cart/add",Object(x["a"])(Object(x["a"])({},t),{},{qty:1}))},loadGoods:function(){this.$store.dispatch("Goods/load")},changeQty:function(t,e){this.$store.dispatch("Cart/edit",Object(x["a"])(Object(x["a"])({},t),{},{qty:Number(e.target.value)}))},removeFromCart:function(t){this.$store.dispatch("Cart/remove",t)}},computed:{cartList:function(){return this.$store.state.Cart.list},cartAmount:function(){return this.$store.getters["Cart/amount"]},goods:function(){return this.$store.state.Goods.list}},watch:{exchangeRate:function(t,e){var n=this;this.priceClass="exchange-price "+(t<e?"exchange-price--increased":"exchange-price--decreased"),setTimeout((function(){return n.priceClass="exchange-price "}),2e3)}},mounted:function(){this.loadGoods(),setInterval(this.loadGoods,15e3)}});n("dfe8");_.render=C,_.__scopeId="data-v-14ff57c0";var G=_,k=n("5502"),w=function(t,e){var n=t.commit;n("add",e)},P=function(t,e){var n=t.commit;n("edit",e)},q=function(t,e){var n=t.commit;n("remove",e.id)},R={add:w,edit:P,remove:q},S=(n("c740"),n("4de4"),{add:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.id}));n>-1?t.list[n].qty=Number(t.list[n].qty||0)+Number(e.qty):t.list.push(e)},remove:function(t,e){t.list=t.list.filter((function(t){return t.id!==e}))},edit:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.id}));t.list[n].qty=e.qty}}),B=function(){return{list:[]}},$={amount:function(t){return t.list.reduce((function(t,e){return t+e.qty*e.price}),0)}},I={namespaced:!0,actions:R,mutations:S,state:B,getters:$},M=(n("d3b7"),n("159b"),n("07ac"),n("1a01")),A=function(t){var e=t.commit;fetch("./data.json").then((function(t){return t.json()})).then((function(t){var n=t.Value.Goods,c={};n.forEach((function(t){c[t.G]||(c[t.G]={title:M[t.G].G,id:t.G,goods:[]}),c[t.G].goods.push({price:t.C,id:t.T,balance:t.P,title:M[t.G].B[t.T].N})})),e("load",Object.values(c))}))},J={load:A},F={load:function(t,e){t.list=e}},L=function(){return{list:{}}},Q={namespaced:!0,actions:J,mutations:F,state:L},V=new k["a"]({modules:{Cart:I,Goods:Q},devtools:!0,strict:!0});Object(c["b"])(G).use(V).mount("#app")},dfe8:function(t,e,n){"use strict";n("5669")}});
//# sourceMappingURL=app.76161836.js.map