(function(t){function e(e){for(var c,o,i=e[0],s=e[1],u=e[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t[c]=s[c]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],c=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(c=!1)}c&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var c={},r={app:0},a=[];function o(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=c,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)o.d(n,c,function(e){return t[e]}.bind(null,c));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/cart/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1a01":function(t){t.exports=JSON.parse('{"1":{"G":"Книги","B":{"1":{"N":"Алгоритмы. Построение и анализ. Т. Кормен, Ч. Лейзерсон, Р. Ривест, К. Штайн.","T":1},"2":{"N":"Совершенный код. Стив Макконнелл.","T":1},"3":{"N":"JavaScript. Подробное руководство. Дэвид Флэнаган.","T":1}}},"2":{"G":"Еда","C":2,"B":{"7":{"N":"Овсяные пирожные с шоколадной прослойкой","T":3},"8":{"N":"Суп с пекинской капустой","T":3},"85":{"N":"Вишня в коньяке","T":3},"86":{"N":"Постный фаршированный перец","T":3},"109":{"N":"Салат Подсолнух","T":""},"110":{"N":"Форель «Эрланген»","T":""},"111":{"N":"Салат с морепродуктами","T":3},"112":{"N":"Тёртый пирог","T":3},"115":{"N":"Свинина, маринованная в красном вине, с кориандром","T":""},"116":{"N":"Салат с черносливом и ветчиной","T":""},"125":{"N":"Болгарский перец и цуккини на гриле","T":3},"126":{"N":"Салат «Букет нарциссов»","T":3},"127":{"N":"Салат из морепродуктов, с огурцами, рукколой и оливками","T":3}}},"5":{"G":"Спорт","C":2,"B":{"184":{"N":"Беговая дорожка","T":1},"185":{"N":"Гантели съемные","T":1},"186":{"N":"Ружьё охотничье","T":1},"187":{"N":"Велотренажер","T":1}}},"8":{"G":"Сантехника","C":3,"B":{"4":{"N":"Акриловая ванна Alpen Mars ","T":1},"5":{"N":"Смеситель Sturm Classica","T":1},"6":{"N":"Тумба с раковиной Tiffany World ","T":1}}},"10":{"G":"Запчасти для машин","C":3,"B":{"191":{"N":"Амортизатор задний CX-5 ","T":3},"192":{"N":"Пружина амортизатора ","T":3},"193":{"N":"Корпус воздушного фильтра ","T":3},"194":{"N":"Ремень приводной","T":3},"195":{"N":"Диффузор радиатора","T":1},"196":{"N":"Фильтр АКПП","T":3}}},"15":{"G":"Сувениры","C":2,"B":{"11":{"N":"Набор для рисования Пастель","T":3},"12":{"N":"Брелок-рулетка","T":3},"63":{"N":"Брелок-открывалка","T":3},"64":{"N":"Ручка-стилус шариковая","T":3},"146":{"N":"Браслет","T":3},"147":{"N":"Чехол для очков","T":3},"148":{"N":"Сумка для выставок","T":3}}}}')},"2c9f":function(t,e,n){"use strict";n("6e78")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r=(n("b680"),Object(c["q"])("data-v-3858630c"));Object(c["j"])("data-v-3858630c");var a={class:"page"},o={class:"exchange"},i=Object(c["f"])("div",null,"Курс: min=20 р.",-1),s={class:"exchange-range"},u=Object(c["f"])("div",null,"max=80 р.",-1),l={class:"market"},d={class:"group__title"},f={class:"goods"},b={class:"goods__title"},p={class:"cart"},j=Object(c["f"])("h2",null,"Корзина",-1),O={class:"cart__table"},h=Object(c["f"])("th",null,"Наименование",-1),m=Object(c["f"])("th",null,"Количество",-1),v=Object(c["f"])("th",null,"Цена",-1),g={class:"cart__qty"},N={key:0},T={class:"cart__amount"},y=Object(c["e"])(" Общая стоимость: "),C=Object(c["e"])("руб. ");Object(c["i"])();var x=r((function(t,e,n,r,x,_){return Object(c["h"])(),Object(c["c"])("div",a,[Object(c["f"])("div",o,[i,Object(c["f"])("div",s,[Object(c["f"])("span",{class:x.priceClass},Object(c["m"])(x.exchangeRate),3),Object(c["p"])(Object(c["f"])("input",{type:"range",min:"20",max:"80","onUpdate:modelValue":e[1]||(e[1]=function(t){return x.exchangeRate=t})},null,512),[[c["n"],x.exchangeRate]])]),u]),Object(c["f"])("div",l,[(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["l"])(_.goods,(function(t,e){return Object(c["h"])(),Object(c["c"])("div",{class:"group",key:e},[Object(c["f"])("h3",d,Object(c["m"])(t.title),1),Object(c["f"])("ul",f,[(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["l"])(t.goods,(function(t,e){return Object(c["h"])(),Object(c["c"])("li",{class:"goods__item",key:e},[Object(c["f"])("p",b,Object(c["m"])(t.title)+" ("+Object(c["m"])(t.balance)+")",1),Object(c["f"])("span",{class:x.priceClass+" goods__price"},Object(c["m"])(_.getRublePrice(t.price)),3),Object(c["f"])("button",{class:"button",type:"button",onClick:function(e){return _.addToCart(t)}}," + ",8,["onClick"])])})),128))])])})),128))]),Object(c["f"])("div",p,[j,Object(c["f"])("table",O,[Object(c["f"])("tbody",null,[h,m,v,(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["l"])(_.cartList,(function(t,e){return Object(c["h"])(),Object(c["c"])("tr",{key:e},[Object(c["f"])("td",null,Object(c["m"])(t.title),1),Object(c["f"])("td",g,[Object(c["f"])("input",{type:"number",min:"0",value:t.qty,onInput:function(e){return _.changeQty(t,e)}},null,40,["value","onInput"]),t.qty>=t.balance?(Object(c["h"])(),Object(c["c"])("span",N,"Количество ограничено")):Object(c["d"])("",!0)]),Object(c["f"])("td",null,Object(c["m"])(_.getRublePrice(t.price))+" руб./шт",1),Object(c["f"])("td",null,[Object(c["f"])("button",{class:"button",onClick:function(e){return _.removeFromCart(t)}}," Удалить ",8,["onClick"])])])})),128))])]),Object(c["f"])("p",T,[y,Object(c["f"])("span",{class:x.cartPriceClass},Object(c["m"])(_.cartAmount.toFixed(2)),3),C])])])})),_=n("5530"),G=(n("a9e3"),80),P=20,k={name:"App",data:function(){return{groupedGoods:[],exchangeRate:50,priceClass:"price",cartPriceClass:"price"}},methods:{getRublePrice:function(t){return(t*this.exchangeRate).toFixed(2)},addToCart:function(t){this.$store.dispatch("Cart/add",Object(_["a"])(Object(_["a"])({},t),{},{qty:1}))},loadGoods:function(){this.$store.dispatch("Goods/load")},changeQty:function(t,e){var n=e.target.value;n>=0&&n<=t.balance&&this.$store.dispatch("Cart/edit",Object(_["a"])(Object(_["a"])({},t),{},{qty:Number(n)})),this.$forceUpdate()},removeFromCart:function(t){this.$store.dispatch("Cart/remove",t)},changeClassName:function(t,e){var n="price "+(t>e?"price--increased":"price--decreased");return n},randomPrice:function(t,e){return Math.floor(t+Math.random()*(e+1-t))}},computed:{cartList:function(){return this.$store.state.Cart.list},cartAmount:function(){return this.$store.getters["Cart/amount"](this.exchangeRate)},goods:function(){return this.$store.state.Goods.list}},watch:{cartAmount:function(t,e){this.cartPriceClass=this.changeClassName(t,e)},exchangeRate:function(t,e){this.priceClass=this.changeClassName(t,e)}},mounted:function(){var t=this;this.loadGoods(),setInterval((function(){t.exchangeRate=t.randomPrice(P,G),t.loadGoods}),15e3)}};n("2c9f");k.render=x,k.__scopeId="data-v-3858630c";var q=k,w=n("5502"),R=function(t,e){var n=t.commit;n("add",e)},S=function(t,e){var n=t.commit;n("edit",e)},$=function(t,e){var n=t.commit;n("remove",e.id)},B={add:R,edit:S,remove:$},M=(n("c740"),n("4de4"),{add:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.id}));n>-1?t.list[n].qty=Number(t.list[n].qty||0)+Number(e.qty):t.list.push(e)},remove:function(t,e){t.list=t.list.filter((function(t){return t.id!==e}))},edit:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.id}));t.list[n].qty=e.qty}}),I=function(){return{list:[]}},A={amount:function(t){return function(e){var n=t.list.reduce((function(t,n){return console.log(e),t+n.qty*n.price}),0);return n*=e,n}}},F={namespaced:!0,actions:B,mutations:M,state:I,getters:A},J=(n("d3b7"),n("159b"),n("07ac"),n("1a01")),L=function(t){var e=t.commit;fetch("./data.json").then((function(t){return t.json()})).then((function(t){var n=t.Value.Goods,c={};n.forEach((function(t){c[t.G]||(c[t.G]={title:J[t.G].G,id:t.G,goods:[]}),c[t.G].goods.push({price:t.C,id:t.T,balance:t.P,title:J[t.G].B[t.T].N})})),e("load",Object.values(c))}))},Q={load:L},U={load:function(t,e){t.list=e}},V=function(){return{list:{}}},E={namespaced:!0,actions:Q,mutations:U,state:V},W=new w["a"]({modules:{Cart:F,Goods:E},devtools:!0,strict:!0});Object(c["b"])(q).use(W).mount("#app")},"6e78":function(t,e,n){}});
//# sourceMappingURL=app.02d720da.js.map