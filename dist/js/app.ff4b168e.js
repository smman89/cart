(function(t){function e(e){for(var c,i,u=e[0],o=e[1],s=e[2],d=0,f=[];d<u.length;d++)i=u[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(t[c]=o[c]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],c=!0,u=1;u<n.length;u++){var o=n[u];0!==a[o]&&(c=!1)}c&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var c={},a={app:0},r=[];function i(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=c,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)i.d(n,c,function(e){return t[e]}.bind(null,c));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/cart/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=e,u=u.slice();for(var s=0;s<u.length;s++)e(u[s]);var l=o;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0b12":function(t,e,n){"use strict";n("16f8")},"16f8":function(t,e,n){},"1a01":function(t){t.exports=JSON.parse('{"1":{"G":"Книги","B":{"1":{"N":"Алгоритмы. Построение и анализ. Т. Кормен, Ч. Лейзерсон, Р. Ривест, К. Штайн.","T":1},"2":{"N":"Совершенный код. Стив Макконнелл.","T":1},"3":{"N":"JavaScript. Подробное руководство. Дэвид Флэнаган.","T":1}}},"2":{"G":"Еда","C":2,"B":{"7":{"N":"Овсяные пирожные с шоколадной прослойкой","T":3},"8":{"N":"Суп с пекинской капустой","T":3},"85":{"N":"Вишня в коньяке","T":3},"86":{"N":"Постный фаршированный перец","T":3},"109":{"N":"Салат Подсолнух","T":""},"110":{"N":"Форель «Эрланген»","T":""},"111":{"N":"Салат с морепродуктами","T":3},"112":{"N":"Тёртый пирог","T":3},"115":{"N":"Свинина, маринованная в красном вине, с кориандром","T":""},"116":{"N":"Салат с черносливом и ветчиной","T":""},"125":{"N":"Болгарский перец и цуккини на гриле","T":3},"126":{"N":"Салат «Букет нарциссов»","T":3},"127":{"N":"Салат из морепродуктов, с огурцами, рукколой и оливками","T":3}}},"5":{"G":"Спорт","C":2,"B":{"184":{"N":"Беговая дорожка","T":1},"185":{"N":"Гантели съемные","T":1},"186":{"N":"Ружьё охотничье","T":1},"187":{"N":"Велотренажер","T":1}}},"8":{"G":"Сантехника","C":3,"B":{"4":{"N":"Акриловая ванна Alpen Mars ","T":1},"5":{"N":"Смеситель Sturm Classica","T":1},"6":{"N":"Тумба с раковиной Tiffany World ","T":1}}},"10":{"G":"Запчасти для машин","C":3,"B":{"191":{"N":"Амортизатор задний CX-5 ","T":3},"192":{"N":"Пружина амортизатора ","T":3},"193":{"N":"Корпус воздушного фильтра ","T":3},"194":{"N":"Ремень приводной","T":3},"195":{"N":"Диффузор радиатора","T":1},"196":{"N":"Фильтр АКПП","T":3}}},"15":{"G":"Сувениры","C":2,"B":{"11":{"N":"Набор для рисования Пастель","T":3},"12":{"N":"Брелок-рулетка","T":3},"63":{"N":"Брелок-открывалка","T":3},"64":{"N":"Ручка-стилус шариковая","T":3},"146":{"N":"Браслет","T":3},"147":{"N":"Чехол для очков","T":3},"148":{"N":"Сумка для выставок","T":3}}}}')},"1e43":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),a={class:"page"};function r(t,e,n,r,i,u){var o=Object(c["o"])("RateExchanger"),s=Object(c["o"])("Goods"),l=Object(c["o"])("Cart");return Object(c["h"])(),Object(c["c"])("div",a,[Object(c["f"])(o,{min:i.MIN_EXCHANGE_RATE,max:i.MAX_EXCHANGE_RATE,modelValue:u.exchangeRate,"onUpdate:modelValue":e[1]||(e[1]=function(t){return u.exchangeRate=t})},null,8,["min","max","modelValue"]),Object(c["f"])(s),Object(c["f"])(l)])}var i=Object(c["r"])("data-v-1590e663");Object(c["k"])("data-v-1590e663");var u={class:"cart"},o=Object(c["f"])("h2",null,"Корзина",-1),s={class:"cart__table"},l=Object(c["f"])("th",null,"Наименование",-1),d=Object(c["f"])("th",null,"Количество",-1),f=Object(c["f"])("th",null,"Цена",-1),b={class:"cart__quantity"},p={key:0},m={class:"cart__amount"},j=Object(c["e"])(" Общая стоимость: "),O=Object(c["e"])("руб. ");Object(c["i"])();var h=i((function(t,e,n,a,r,i){var h=Object(c["o"])("CustomInput");return Object(c["h"])(),Object(c["c"])("div",u,[o,Object(c["f"])("table",s,[Object(c["f"])("tbody",null,[l,d,f,(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["n"])(i.cartList,(function(t,e){return Object(c["h"])(),Object(c["c"])("tr",{key:e},[Object(c["f"])("td",null,Object(c["p"])(t.title),1),Object(c["f"])("td",b,[Object(c["f"])(h,{val:t.quantity,max:t.balance,onInput:function(e){return i.changeQuantity(t,e)}},null,8,["val","max","onInput"]),t.quantity>=t.balance?(Object(c["h"])(),Object(c["c"])("span",p,"Количество ограничено")):Object(c["d"])("",!0)]),Object(c["f"])("td",null,Object(c["p"])(i.getPrice(t.price))+" руб./шт",1),Object(c["f"])("td",null,[Object(c["f"])("button",{class:"button",onClick:function(e){return i.removeFromCart(t)}}," Удалить ",8,["onClick"])])])})),128))])]),Object(c["f"])("p",m,[j,Object(c["f"])("span",{class:a.priceClass},Object(c["p"])(i.getPrice(i.cartAmount)),3),O])])})),v=n("5530");function g(t,e,n,a,r,i){return Object(c["h"])(),Object(c["c"])("input",{type:"number",min:"0",max:n.max,value:r.newValue,onInput:e[1]||(e[1]=function(){return i.input&&i.input.apply(i,arguments)})},null,40,["max","value"])}n("a9e3");var N={props:{max:{type:Number,required:!0},val:{type:Number,required:!0}},data:function(){return{newValue:null}},methods:{input:function(t){var e=parseInt(t.target.value);e>=0&&e<=this.max?(this.newValue=Number(e),this.$emit("input",Number(e))):this.newValue=0}},updated:function(){this.newValue=this.val},mounted:function(){this.newValue=this.val}};N.render=g;var T=N,y={setup:function(){var t=Object(c["g"])("priceClass","price");return{priceClass:t}},components:{CustomInput:T},methods:{removeFromCart:function(t){this.$store.dispatch("Cart/remove",t)},getPrice:function(t){return this.$store.getters["Rate/getRublePrice"](t)},changeQuantity:function(t,e){e>=0&&e<=t.balance&&this.$store.dispatch("Cart/edit",Object(v["a"])(Object(v["a"])({},t),{},{quantity:e}))}},computed:{cartList:function(){return this.$store.state.Cart.list},cartAmount:function(){return this.$store.getters["Cart/amount"]}}};n("6503");y.render=h,y.__scopeId="data-v-1590e663";var C=y,_=Object(c["r"])("data-v-4c3dc3de");Object(c["k"])("data-v-4c3dc3de");var x={class:"goods"},G={class:"goods__header"},E={class:"goods__list"},R={class:"goods__title"};Object(c["i"])();var A=_((function(t,e,n,a,r,i){return Object(c["h"])(),Object(c["c"])("div",x,[(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["n"])(i.goods,(function(t,e){return Object(c["h"])(),Object(c["c"])("div",{class:"goods__group",key:e},[Object(c["f"])("h3",G,Object(c["p"])(t.title),1),Object(c["f"])("ul",E,[(Object(c["h"])(!0),Object(c["c"])(c["a"],null,Object(c["n"])(t.goods,(function(t,e){return Object(c["h"])(),Object(c["c"])("li",{class:"goods__item",key:e},[Object(c["f"])("p",R,Object(c["p"])(t.title)+" ("+Object(c["p"])(t.balance)+")",1),Object(c["f"])("span",{class:a.priceClass+" goods__price"},Object(c["p"])(i.getPrice(t.price)),3),Object(c["f"])("button",{class:"button",type:"button",onClick:function(e){return i.addToCart(t)}}," + ",8,["onClick"])])})),128))])])})),128))])})),w={setup:function(){var t=Object(c["g"])("priceClass","price");return{priceClass:t}},computed:{goods:function(){return this.$store.state.Goods.list}},methods:{getPrice:function(t){return this.$store.getters["Rate/getRublePrice"](t)},addToCart:function(t){this.$store.dispatch("Cart/add",Object(v["a"])(Object(v["a"])({},t),{},{quantity:1}))}}};n("0b12");w.render=A,w.__scopeId="data-v-4c3dc3de";var P=w,q={class:"exchange"},I={class:"exchange__range"};function V(t,e,n,a,r,i){return Object(c["h"])(),Object(c["c"])("div",q,[Object(c["f"])("div",null,"Курс: min="+Object(c["p"])(n.min)+" р.",1),Object(c["f"])("div",I,[Object(c["f"])("span",{class:["exchange__value",a.priceClass]},Object(c["p"])(n.modelValue),3),Object(c["f"])("input",{class:"exchange__input",type:"range",min:n.min,max:n.max,value:n.modelValue,onChange:e[1]||(e[1]=function(){return i.change&&i.change.apply(i,arguments)})},null,40,["min","max","value"])]),Object(c["f"])("div",null,"max="+Object(c["p"])(n.max)+" р.",1)])}var $={setup:function(){var t=Object(c["g"])("priceClass","price");return{priceClass:t}},props:{min:{type:Number,required:!0},max:{type:Number,required:!0},modelValue:{type:Number,required:!0}},methods:{change:function(t){this.$emit("update:modelValue",Number(t.target.value))}}};n("f602");$.render=V;var k=$,M={name:"App",components:{Cart:C,Goods:P,RateExchanger:k},data:function(){return{MIN_EXCHANGE_RATE:20,MAX_EXCHANGE_RATE:80}},setup:function(){var t=Object(c["m"])("price");function e(e,n){t.value="price "+(e>n?"price--increased":"price--decreased")}return Object(c["j"])("priceClass",t),{priceClass:t,changeClassName:e}},computed:{exchangeRate:{get:function(){return this.$store.state.Rate.value},set:function(t){this.$store.dispatch("Rate/edit",t)}}},methods:{loadGoods:function(){this.$store.dispatch("Goods/load")},randomPrice:function(t,e){return Math.floor(t+Math.random()*(e+1-t))}},watch:{exchangeRate:function(t,e){this.changeClassName(t,e)}},mounted:function(){var t=this;this.loadGoods(),setInterval((function(){var e=t.randomPrice(t.MIN_EXCHANGE_RATE,t.MAX_EXCHANGE_RATE);t.$store.dispatch("Rate/edit",e),t.loadGoods}),15e3)}};n("d859");M.render=r;var X=M,S=n("5502"),B=function(t,e){var n=t.commit;n("add",e)},H=function(t,e){var n=t.commit;n("edit",e)},J=function(t,e){var n=t.commit;n("remove",e.id)},F={add:B,edit:H,remove:J};n("c740"),n("4de4");function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=e+n;return c<=t}var Q={add:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.id})),c=Number(e.quantity);n>-1?L(e.balance,c,t.list[n].quantity)&&(t.list[n].quantity=Number(t.list[n].quantity||0)+c):L(e.balance,c)&&t.list.push(e)},remove:function(t,e){t.list=t.list.filter((function(t){return t.id!==e}))},edit:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.id}));t.list[n].quantity=e.quantity}},U=function(){return{list:[]}},W={amount:function(t){return t.list.reduce((function(t,e){return t+e.quantity*e.price}),0)}},z={namespaced:!0,actions:F,mutations:Q,state:U,getters:W},D=(n("d3b7"),n("159b"),n("07ac"),n("1a01")),K=function(t){var e=t.commit;fetch("./data.json").then((function(t){return t.json()})).then((function(t){var n=t.Value.Goods,c={};n.forEach((function(t){c[t.G]||(c[t.G]={title:D[t.G].G,id:t.G,goods:[]}),c[t.G].goods.push({price:t.C,id:t.T,balance:t.P,title:D[t.G].B[t.T].N})})),e("load",Object.values(c))}))},Y={load:K},Z={load:function(t,e){t.list=e}},tt=function(){return{list:{}}},et={namespaced:!0,actions:Y,mutations:Z,state:tt},nt=function(t,e){var n=t.commit;n("edit",e)},ct={edit:nt},at={edit:function(t,e){t.value=e}},rt=function(){return{value:50}},it=(n("b680"),{getRublePrice:function(t){return function(e){return(e*t.value).toFixed(2)}}}),ut={namespaced:!0,actions:ct,mutations:at,state:rt,getters:it},ot=new S["a"]({modules:{Cart:z,Goods:et,Rate:ut},devtools:!0,strict:!0});Object(c["b"])(X).use(ot).mount("#app")},6503:function(t,e,n){"use strict";n("1e43")},"93ad":function(t,e,n){},d859:function(t,e,n){"use strict";n("ef1f")},ef1f:function(t,e,n){},f602:function(t,e,n){"use strict";n("93ad")}});
//# sourceMappingURL=app.ff4b168e.js.map